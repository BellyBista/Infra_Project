{"format_version":"1.2","terraform_version":"1.5.3","variables":{"access_key":{"value":"AKIA6H7BF7AQQ473XKEK"},"secret_key":{"value":"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"},"vault_addr":{"value":"http://127.0.0.1:8200"},"vault_token":{"value":"hvs.FuwBX2xU49zslFqagMvllA29"}},"planned_values":{"outputs":{"backend":{"sensitive":false,"type":"string","value":"aws"},"role":{"sensitive":false,"type":"string","value":"ec2-admin-role"}},"root_module":{"resources":[{"address":"vault_auth_backend.aws","mode":"managed","type":"vault_auth_backend","name":"aws","provider_name":"registry.terraform.io/hashicorp/vault","schema_version":1,"values":{"accessor":"auth_aws_addff0a9","description":"","disable_remount":false,"id":"aws","local":false,"namespace":null,"path":"aws","tune":[],"type":"aws"},"sensitive_values":{"tune":[]}},{"address":"vault_aws_secret_backend.aws","mode":"managed","type":"vault_aws_secret_backend","name":"aws","provider_name":"registry.terraform.io/hashicorp/vault","schema_version":0,"values":{"access_key":"AKIA6H7BF7AQQ473XKEK","default_lease_ttl_seconds":120,"description":"","disable_remount":false,"iam_endpoint":"","id":"aws","max_lease_ttl_seconds":3600,"namespace":null,"path":"aws","region":"us-east-1","secret_key":"GfgWPtmigvWD58EeNio8PdKvd+y4OwuiBA/EQQ+G","sts_endpoint":"","username_template":"{{ if (eq .Type \"STS\") }}{{ printf \"vault-%s-%s\"  (unix_time) (random 20) | truncate 32 }}{{ else }}{{ printf \"vault-%s-%s-%s\" (printf \"%s-%s\" (.DisplayName) (.PolicyName) | truncate 42) (unix_time) (random 20) | truncate 64 }}{{ end }}"},"sensitive_values":{}},{"address":"vault_aws_secret_backend_role.ec2-admin","mode":"managed","type":"vault_aws_secret_backend_role","name":"ec2-admin","provider_name":"registry.terraform.io/hashicorp/vault","schema_version":0,"values":{"backend":"aws","credential_type":"iam_user","default_sts_ttl":0,"iam_groups":[],"id":"aws/roles/ec2-admin-role","max_sts_ttl":0,"name":"ec2-admin-role","namespace":null,"permissions_boundary_arn":"","policy_arns":[],"policy_document":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":[\"iam:*\",\"ec2:*\",\"eks:*\"],\"Resource\":\"*\"}]}","role_arns":[],"user_path":""},"sensitive_values":{"iam_groups":[],"policy_arns":[],"role_arns":[]}}]}},"resource_changes":[{"address":"vault_auth_backend.aws","mode":"managed","type":"vault_auth_backend","name":"aws","provider_name":"registry.terraform.io/hashicorp/vault","change":{"actions":["no-op"],"before":{"accessor":"auth_aws_addff0a9","description":"","disable_remount":false,"id":"aws","local":false,"namespace":null,"path":"aws","tune":[],"type":"aws"},"after":{"accessor":"auth_aws_addff0a9","description":"","disable_remount":false,"id":"aws","local":false,"namespace":null,"path":"aws","tune":[],"type":"aws"},"after_unknown":{},"before_sensitive":{"tune":[]},"after_sensitive":{"tune":[]}}},{"address":"vault_aws_secret_backend.aws","mode":"managed","type":"vault_aws_secret_backend","name":"aws","provider_name":"registry.terraform.io/hashicorp/vault","change":{"actions":["no-op"],"before":{"access_key":"AKIA6H7BF7AQQ473XKEK","default_lease_ttl_seconds":120,"description":"","disable_remount":false,"iam_endpoint":"","id":"aws","max_lease_ttl_seconds":3600,"namespace":null,"path":"aws","region":"us-east-1","secret_key":"GfgWPtmigvWD58EeNio8PdKvd+y4OwuiBA/EQQ+G","sts_endpoint":"","username_template":"{{ if (eq .Type \"STS\") }}{{ printf \"vault-%s-%s\"  (unix_time) (random 20) | truncate 32 }}{{ else }}{{ printf \"vault-%s-%s-%s\" (printf \"%s-%s\" (.DisplayName) (.PolicyName) | truncate 42) (unix_time) (random 20) | truncate 64 }}{{ end }}"},"after":{"access_key":"AKIA6H7BF7AQQ473XKEK","default_lease_ttl_seconds":120,"description":"","disable_remount":false,"iam_endpoint":"","id":"aws","max_lease_ttl_seconds":3600,"namespace":null,"path":"aws","region":"us-east-1","secret_key":"GfgWPtmigvWD58EeNio8PdKvd+y4OwuiBA/EQQ+G","sts_endpoint":"","username_template":"{{ if (eq .Type \"STS\") }}{{ printf \"vault-%s-%s\"  (unix_time) (random 20) | truncate 32 }}{{ else }}{{ printf \"vault-%s-%s-%s\" (printf \"%s-%s\" (.DisplayName) (.PolicyName) | truncate 42) (unix_time) (random 20) | truncate 64 }}{{ end }}"},"after_unknown":{},"before_sensitive":{"access_key":true,"secret_key":true},"after_sensitive":{"access_key":true,"secret_key":true}}},{"address":"vault_aws_secret_backend_role.ec2-admin","mode":"managed","type":"vault_aws_secret_backend_role","name":"ec2-admin","provider_name":"registry.terraform.io/hashicorp/vault","change":{"actions":["no-op"],"before":{"backend":"aws","credential_type":"iam_user","default_sts_ttl":0,"iam_groups":[],"id":"aws/roles/ec2-admin-role","max_sts_ttl":0,"name":"ec2-admin-role","namespace":null,"permissions_boundary_arn":"","policy_arns":[],"policy_document":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":[\"iam:*\",\"ec2:*\",\"eks:*\"],\"Resource\":\"*\"}]}","role_arns":[],"user_path":""},"after":{"backend":"aws","credential_type":"iam_user","default_sts_ttl":0,"iam_groups":[],"id":"aws/roles/ec2-admin-role","max_sts_ttl":0,"name":"ec2-admin-role","namespace":null,"permissions_boundary_arn":"","policy_arns":[],"policy_document":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":[\"iam:*\",\"ec2:*\",\"eks:*\"],\"Resource\":\"*\"}]}","role_arns":[],"user_path":""},"after_unknown":{},"before_sensitive":{"iam_groups":[],"policy_arns":[],"role_arns":[]},"after_sensitive":{"iam_groups":[],"policy_arns":[],"role_arns":[]}}}],"output_changes":{"backend":{"actions":["no-op"],"before":"aws","after":"aws","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"role":{"actions":["no-op"],"before":"ec2-admin-role","after":"ec2-admin-role","after_unknown":false,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.5.3","values":{"outputs":{"backend":{"sensitive":false,"value":"aws","type":"string"},"role":{"sensitive":false,"value":"ec2-admin-role","type":"string"}},"root_module":{"resources":[{"address":"vault_auth_backend.aws","mode":"managed","type":"vault_auth_backend","name":"aws","provider_name":"registry.terraform.io/hashicorp/vault","schema_version":1,"values":{"accessor":"auth_aws_addff0a9","description":"","disable_remount":false,"id":"aws","local":false,"namespace":null,"path":"aws","tune":[],"type":"aws"},"sensitive_values":{"tune":[]}},{"address":"vault_aws_secret_backend.aws","mode":"managed","type":"vault_aws_secret_backend","name":"aws","provider_name":"registry.terraform.io/hashicorp/vault","schema_version":0,"values":{"access_key":"AKIA6H7BF7AQQ473XKEK","default_lease_ttl_seconds":120,"description":"","disable_remount":false,"iam_endpoint":"","id":"aws","max_lease_ttl_seconds":3600,"namespace":null,"path":"aws","region":"us-east-1","secret_key":"GfgWPtmigvWD58EeNio8PdKvd+y4OwuiBA/EQQ+G","sts_endpoint":"","username_template":"{{ if (eq .Type \"STS\") }}{{ printf \"vault-%s-%s\"  (unix_time) (random 20) | truncate 32 }}{{ else }}{{ printf \"vault-%s-%s-%s\" (printf \"%s-%s\" (.DisplayName) (.PolicyName) | truncate 42) (unix_time) (random 20) | truncate 64 }}{{ end }}"},"sensitive_values":{"access_key":true,"secret_key":true}},{"address":"vault_aws_secret_backend_role.ec2-admin","mode":"managed","type":"vault_aws_secret_backend_role","name":"ec2-admin","provider_name":"registry.terraform.io/hashicorp/vault","schema_version":0,"values":{"backend":"aws","credential_type":"iam_user","default_sts_ttl":0,"iam_groups":[],"id":"aws/roles/ec2-admin-role","max_sts_ttl":0,"name":"ec2-admin-role","namespace":null,"permissions_boundary_arn":"","policy_arns":[],"policy_document":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":[\"iam:*\",\"ec2:*\",\"eks:*\"],\"Resource\":\"*\"}]}","role_arns":[],"user_path":""},"sensitive_values":{"iam_groups":[],"policy_arns":[],"role_arns":[]},"depends_on":["vault_aws_secret_backend.aws"]}]}}},"configuration":{"provider_config":{"vault":{"name":"vault","full_name":"registry.terraform.io/hashicorp/vault","expressions":{"address":{"references":["var.vault_addr"]},"token":{"references":["var.vault_token"]}}}},"root_module":{"outputs":{"backend":{"expression":{"references":["vault_aws_secret_backend_role.ec2-admin.backend","vault_aws_secret_backend_role.ec2-admin"]}},"role":{"expression":{"references":["vault_aws_secret_backend_role.ec2-admin.name","vault_aws_secret_backend_role.ec2-admin"]}}},"resources":[{"address":"vault_auth_backend.aws","mode":"managed","type":"vault_auth_backend","name":"aws","provider_config_key":"vault","expressions":{"type":{"constant_value":"aws"}},"schema_version":1},{"address":"vault_aws_secret_backend.aws","mode":"managed","type":"vault_aws_secret_backend","name":"aws","provider_config_key":"vault","expressions":{"access_key":{"references":["var.access_key"]},"default_lease_ttl_seconds":{"constant_value":"120"},"max_lease_ttl_seconds":{"constant_value":"3600"},"region":{"constant_value":"us-east-1"},"secret_key":{"references":["var.secret_key"]}},"schema_version":0},{"address":"vault_aws_secret_backend_role.ec2-admin","mode":"managed","type":"vault_aws_secret_backend_role","name":"ec2-admin","provider_config_key":"vault","expressions":{"backend":{"references":["vault_aws_secret_backend.aws.path","vault_aws_secret_backend.aws"]},"credential_type":{"constant_value":"iam_user"},"name":{"constant_value":"ec2-admin-role"},"policy_document":{"constant_value":"{\n\"Version\": \"2012-10-17\",\n\"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:*\", \"ec2:*\", \"eks:*\"\n      ],\n      \"Resource\": \"*\"  \n    }\n]\n}\n"}},"schema_version":0}],"variables":{"access_key":{"default":"AKIA6H7BF7AQQ473XKEK"},"secret_key":{"default":"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"},"vault_addr":{"default":"http://127.0.0.1:8200"},"vault_token":{"default":"hvs.FuwBX2xU49zslFqagMvllA29"}}}},"timestamp":"2023-09-30T14:51:19Z"}
